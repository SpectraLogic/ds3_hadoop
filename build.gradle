apply plugin: "java"
apply plugin: "maven"

sourceCompatibility = JavaVersion.VERSION_1_7

repositories {
    mavenLocal()
    mavenCentral()
}

task copyToLib(type: Copy) {
    from configurations.runtime
    into "$buildDir/resources/main/lib"
}

jar.dependsOn copyToLib

jar {
    manifest {
        attributes("Main-Class": "com.spectralogic.hadoop.FileMigrator")
    }
}

dependencies {
    compile fileTree(dir: 'lib', include: '*.jar')
    compile 'javax.activation:activation:1.1'
    compile 'org.apache.hadoop:hadoop-core:1.2.1'
    //compile 'org.apache.hadoop:hadoop-common:0.23.10'
    compile 'com.spectralogic:ds3_java_sdk:0.1.1-SNAPSHOT'
    compile 'com.google.guava:guava:16.0.1'
    testCompile 'junit:junit:4.11'
}